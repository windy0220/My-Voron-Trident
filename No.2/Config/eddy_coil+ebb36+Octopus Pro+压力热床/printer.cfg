[include fluidd.cfg]
[include ebb36.cfg]
[include eddy.cfg]
[include fz-wipe-nozzle.cfg]


# [include adxl345.cfg]

# This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0
# To use this config, the firmware should be compiled for the RP2040 with
# USB communication.

# The "make flash" command does not work on the SKR Pico V1.0. Instead,
# after running "make", copy the generated "out/klipper.uf2" file
# to the mass storage device in RP2040 boot mode

## Voron Design VORON 0.2 SKR Pico V1.0 config

## *** THINGS TO CHANGE/CHECK: ***
## MCU path                                                                     [mcu] section
## Z and Extruder motor currents                                                [tmc2209 stepper_*] sections. Uncomment the stepper motor you have
## Full steps per rotation for Extruder                                         [extruder] section
## Thermistor types                                                             [extruder] and [heater_bed] sections - See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types
## Motor currents                                                               [extruder] [stepper] and [_HOME_X/Y] macro sections
## PID tune                                                                     [extruder] and [heater_bed] sections
## Fine tune E steps                                                            [extruder] section
## For more info                                                                check https://docs.vorondesign.com/build/startup/#v0

[mcu]
#####################################################################
# Obtain definition by "ls -l /dev/serial/by-id/"
#####################################################################
# serial: /dev/serial/by-id/usb-Klipper_rp2040_4550357128928318-if00
# serial: /dev/serial/by-id/usb-STMicroelectronics_MARLIN_BIGTREE_OCTOPUS_V1_CDC_in_FS_Mode_328C358B3131-if00
# serial: /dev/ttyS5											# for UART connection
canbus_uuid:32221b058e03
# restart_method: command

[exclude_object]

[force_move]
enable_force_move: True
#   设置为true来启用 FORCE_MOVE 和 SET_KINEMATIC_POSITION 扩展 
#   G代码命令。
#   默认为false。


[respond]
default_type: echo
#   Sets the default prefix of the "M118" and "RESPOND" output to one
#   of the following:
#       echo: "echo: " (This is the default)
#       command: "// "
#       error: "!! "
default_prefix: echo:
#   Directly sets the default prefix. If present, this value will
#   override the "default_type".


#####################################################################
# 打印机基础配置
#####################################################################

[printer]
kinematics: corexy # 定义机型
max_velocity: 700  # 工具头的最大速度（以mm/s计）。相对于打印件。
max_accel: 50000   			# 工具头的最大加速度（以mm/s^2计）。相对于打印件。
max_z_velocity: 15 			# Max 15 for 12V TMC Drivers, can increase for 24V 定义沿z轴运动的最大速度（单位：mm/s）。它限制了Z轴步进
max_z_accel: 350   # 定义沿Z轴运动的最大加速度（单位：mm/s^2）。
square_corner_velocity: 5.0 # 工具头可能以90度角度转角的最大速度（以mm/s计）。一个非零值，可以通过在转角时使工具头的速度瞬时改变，来减少挤出机流速的变化。此值配置内部向心速度转角算法；大于90度的角度会有更高的转角速度，而小于90度的角度会有较低的转角速度。如果此值设置为零，则工具头在每个角落都将减速到零。默认值是5mm/s。

#--------------------------------------------------------------------
# 	振动补偿
#--------------------------------------------------------------------

# [adxl345]
# cs_pin: PC9
# spi_bus: spi3a

# [resonance_tester]
# accel_chip: adxl345
# probe_points:
#     # 打印床中间稍上方的某个位置
#     150, 150, 20

[input_shaper]
#----------------桌子上-------------------
#shaper_type_x = 3hump_ei
#shaper_freq_x = 115.6
#shaper_type_y = 3hump_ei
#shaper_freq_y = 55.2

#----------------地上-------------------
# shaper_type_x = 2hump_ei
# shaper_freq_x = 45.8
# shaper_type_y = 3hump_ei
# shaper_freq_y = 90.0
#--------------------------------------------------------------------
# 	温度传感器
#--------------------------------------------------------------------

[temperature_sensor OctopusPro主板MCU温度]
sensor_type: temperature_mcu
min_temp: -100
max_temp: 100

# [temperature_sensor 香橙派CPU温度]
# sensor_type: temperature_host
# min_temp: 10
# max_temp: 100

# [temperature_sensor XY驱动温度传感器]
# sensor_type: NTC 100K MGB18-104F39050L32
# sensor_pin: PF4
# min_temp: -100
# max_temp: 200

[temperature_sensor Z驱动温度传感器]
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: PF5
min_temp: -100
max_temp: 200
#   以上参数的定义请见“extruder”章节。
#gcode_id:
#   以上参数的定义请见“heater_generic”章节。

[temperature_sensor XY电机温度]
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: PF6
min_temp: -100
max_temp: 200

#--------------------------------------------------------------------
# 	断料检测传感器
#--------------------------------------------------------------------
[filament_switch_sensor 耗材检测]。
#pause_on_runout: True
#   当设置为 "True "时，会在检测到耗尽后立即暂停打印机。
#   请注意, 如果 pause_on_runout 为 False 并且没有定义。
#   runout_gcode的话, 耗尽检测将被禁用。
#   默认为 True。
#runout_gcode:
#   在检测到耗材耗尽后会执行的G代码命令列表。
#   有关G-Code 格式请见 docs/Command_Templates.md。
#   如果 pause_on_runout 被设置为 True，这个G-Code将在
#   暂停后执行。
#   默认情况是不运行任何 G-Code 命令。
#insert_gcode:
#   在检测到耗材插入后会执行的 G-Code 命令列表。
#   关于G代码格式，请参见 docs/Command_Templates.md。
#   默认不运行任何 G-Code 命令，这将禁用耗材插入检测。
#event_delay: 3.0
#   事件之间的最小延迟时间（秒）。
#   在这个时间段内触发的事件将被默许忽略。
#   默认为3秒。
pause_delay: 5
#   暂停命令和执行 runout_gcode 之间的延迟时间, 单位是秒。
#   如果在OctoPrint的情况下，增加这个延迟可能改善暂
#   停的可靠性。如果OctoPrint表现出奇怪的暂停行为，
#   考虑增加这个延迟。
#   默认为0.5秒。
switch_pin:!PA13
#   连接到检测开关的引脚。
#   必须提供此参数。


[neopixel top_leds]
pin: PB0
#   查看主板的接口图，找到对应的引脚
chain_count: 20 #20
#   要控制的灯带的灯珠数量，应小于等于你灯带上串联的灯珠数
color_order: GRB
#   设置灯带RGB顺序，可用选项有GRB RGB, GRBW RGBW，默认是 GRB
initial_RED: 0.5
initial_GREEN: 0.5
initial_BLUE: 0.5
initial_WHITE: 0.0

#--------------------------------------------------------------------
# 	电机配置
#--------------------------------------------------------------------

[stepper_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
microsteps: 32
rotation_distance: 40
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
# endstop_pin:PA14
endstop_pin: EBBCan:PB6
position_min: 0 
position_endstop: 299
position_max: 299

#--------------------------------------------------------------------
homing_speed: 100
homing_retract_dist: 10
second_homing_speed: 20
# homing_positive_dir: false


# uart设置
[tmc2209 stepper_x]
uart_pin: PC4
interpolate: False
# interpolate: True
run_current: 1 #   配置驱动器在步进电机移动期间使用的电流（以安培RMS为单位）。计算方式，额定电流*0.707=最大可用电流，设置为最大可用电流的 60%~70% 即可。雷赛42CM06 额定电流为 2.5 即 2.5*0.707*0.65 = 1.148875
hold_current: 0.3
sense_resistor: 0.110
stealthchop_threshold: 0 #静音阈值 低于此值会启用静音模式

# [tmc2240 stepper_x]
# cs_pin: PE6
# # spi_bus: spi3
# spi_software_mosi_pin: PE14
# spi_software_miso_pin: PE13
# spi_software_sclk_pin: PE12
# run_current: 1.0                   # 电机运行电流值
# interpolate: False                  # 是否开启256微步插值（不建议开启）
# rref: 12300
# stealthchop_threshold: 0           # 静音阀值（如果不需要静音，请将数值改为0）

[stepper_y]
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
microsteps:32
rotation_distance: 40
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin:PG9
position_min: 0
position_endstop:305
position_max:306.5

#--------------------------------------------------------------------
homing_speed: 100
homing_retract_dist:10
second_homing_speed: 20
# homing_positive_dir: false

# uart设置
[tmc2209 stepper_y]
uart_pin: PD11
interpolate: False
# interpolate: True
run_current: 1 #   配置驱动器在步进电机移动期间使用的电流（以安培RMS为单位）。
hold_current: 0.3
sense_resistor: 0.110
stealthchop_threshold: 0

[stepper_z]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
microsteps: 32
# endstop_pin: PB13 ## PB12 for Z-max; endstop have'!' is NO
endstop_pin: PG6
# endstop_pin: probe:z_virtual_endstop
# full_steps_per_rotation: 200
rotation_distance: 8 # Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
# gear_ratio: 80:16

##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##	Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
#position_endstop = 0.136 #限位开关的位置（以毫米为单位）
# position_endstop = 2.653 #pei 厚度 0.52
#position_endstop: 2.703
#position_endstop: 0
# position_endstop: 1.373 #pei bing 厚度 0.60 
# position_endstop: 1.923 # 碳纤维板 厚度 1.10  值越大离热床越近
position_max: 230 #最大有效距离
position_min: -5 # 用户可以命令步进器移动到的最小有效距离（以毫米为单位）。
homing_speed: 5.0 #步进器在归位时的最大速度（以毫米/秒为单位）
second_homing_speed: 3.0 #在进行第二次归位时步进器的速度（以毫米/秒为单位）。默认值是homing_speed的一半。
homing_retract_dist: 5.0 #在归位过程中第二次归位之前的后退距离（以毫米为单位）。

# uart设置
[tmc2208 stepper_z]
uart_pin: PC6
interpolate: False
#   如果为真，则启用步进插值（驱动器将以256微步的速度内部步进）。
#   只有当microsteps设置为16时，这才有效。插值会引入了极小的系统性位置
#   偏差 - 有关详细信息，请参见TMC_Drivers.md。
#   默认为True。
run_current:0.65
hold_current: 0.3
#   配置驱动器在步进电机移动期间使用的电流（以安培RMS为单位）。
#   必须提供此参数。
stealthchop_threshold: 50
#   设定“StealthChop”阈值的速度（以毫米/秒为单位）。当设定时，如果步进
#   电机的速度低于此值，“StealthChop”模式将被启用。
#   默认值为0，此值会禁用“StealthChop”模式。


[stepper_z1]
step_pin: PG4
dir_pin: PC1
enable_pin: !PA0
microsteps: 32
rotation_distance: 8
# full_steps_per_rotation: 200
# gear_ratio: 80:16

[tmc2209 stepper_z1]
uart_pin: PC7
interpolate: False
run_current: 1.0605
hold_current: 0.3
stealthchop_threshold: 50

[stepper_z2]
step_pin: PF9
dir_pin: !PF10
enable_pin: !PG2
microsteps: 32
rotation_distance: 8

[tmc2208 stepper_z2]
uart_pin: PF2
interpolate: False
run_current: 0.65
hold_current: 0.3
stealthchop_threshold: 50

# [stepper_z3]
# step_pin: PC13
# dir_pin: PF0
# enable_pin: !PF1
# microsteps: 32
# rotation_distance: 8

# [tmc2208 stepper_z3]
# uart_pin: PE4
# interpolate: False
# run_current: 0.65
# stealthchop_threshold: 0

#--------------------------------------------------------------------
# 挤出机 
# [extruder]
# step_pin:PB5
# dir_pin:!PB4
# enable_pin:!PB6
# microsteps:16
# rotation_distance: 23.132530122	#新配置值 = 旧配置值 * （实际挤出量/目标挤出量） 13.60737066 * (85/50)
# #   轴在步进电机（或指定了齿轮比例的最后一个齿轮）进行一次完整旋转时行进的距离（以毫米为单位）。必须提供此参数。
# gear_ratio: 50:10
# #   如果步进电机通过齿轮箱与轴相连，则为齿轮比例。
# #   例如，如果使用的是5到1的齿轮箱，可以指定"5:1"。如果轴有多个齿轮箱，可以指定逗号分隔的齿轮比例列表（例如，"57:11, 2:1"）。
# #   如果指定了gear_ratio，则rotation_distance指定了最后一个齿轮完整旋转时轴行进的距离。
# #   默认情况下不使用齿轮比例。 
# full_steps_per_rotation: 200	#200 for 1.8 degree, 400 for 0.9 degree
# nozzle_diameter: 0.400
# filament_diameter: 1.750
# min_temp: -200
# max_temp: 275
# heater_pin: PB1
# # sensor_type:  NTC 100K MGB18-104F39050L32 # 拓竹热端
# sensor_type: NTC 100K MGB18-104F39050L32
# sensor_pin: PC1
# max_power: 0.8
# # 以下为拓竹热端
# #control = pid
# #pid_Kp: 26.610
# #pid_Ki: 5.376
# #pid_Kd: 32.930
# # 以下为v6热端
# # control: pid
# # pid_Kp: 27.942
# # pid_Ki: 2.272
# # pid_Kd: 85.922
# pressure_advance: 0.044 # 压力提前
# pressure_advance_smooth_time: 0.040
# max_extrude_only_distance: 300
# #   一次挤出或回抽的最大长度（以毫米耗材的长度为单位）
# #   如果一次挤出或回抽超过了这个值，这会导致返回一个错误
# #   默认值是：50mm

# uart设置
# [tmc2209 extruder]
# uart_pin: PB3
# interpolate: False
# run_current: 0.5
# # hold_current: 0.5
# sense_resistor: 0.110
# stealthchop_threshold: 0

# [verify_heater extruder]
# max_error: 120
# check_gain_time:20
# hysteresis: 50
# heating_gain: 2


#--------------------------------------------------------------------
# 	热床
#--------------------------------------------------------------------
[heater_bed]
heater_pin: PA1
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: PF3
max_power: 1
#control = pid
# 50
# pid_kp = 14.770
# pid_ki = 0.131
# pid_kd = 414.856
# 100
# pid_Kp: 27.248
# pid_Ki: 0.228
# pid_Kd: 815.391
min_temp: 0
max_temp: 120

#--------------------------------------------------------------------
# 	风扇
#--------------------------------------------------------------------
# fan for printed model FAN0
# 模型风扇
# [fan]
# pin: PA8
# kick_start_time: 0.1 #  风扇全速运行的时间（以秒为单位），当首次启用或增加超过50%时(有助于使风扇开始旋转）。
# max_power: 0.3
# off_below: 0.1
# shutdown_speed: 0
# cycle_time: 0.005
#   将供电给风扇的最小输入速度（以0.0到1.0的值表示）。当请求低于
#   off_below的速度时，风扇将被关闭。此设置可以用于防止风扇停滞，
#   并确保起动开始有效。
#   默认值为0.0。

#fan for hotend FAN1
#[heater_fan my_nozzle_fan]
# 热端风扇
# [heater_fan fan1]
# pin: PA1
# shutdown_speed: 1
# max_power: 1.0
# fan_speed: 1
# kick_start_time: 0.5
# heater: extruder
# heater_temp: 50.0

#fan for control board FAN2
# 电子仓散热风扇
# [controller_fan my_control_fan]
# pin: PA8
# kick_start_time: 0.5
# #   风扇全速运行的时间（以秒为单位），当首次启用或增加超过50%时
# #   （有助于使风扇开始旋转）。
# #   默认值为0.100秒。
# heater: heater_bed
# idle_timeout: 30
# #    在步进驱动器或加热器不再活跃后风扇应保持运行的时间（以秒为单位）。
# #    默认值为 30 秒。
# fan_speed: 0.3
# #    当加热器或步进驱动器活跃时，将设置风扇速度（表示为从 0.0 到 1.0 的值）。
# #    默认值为 1.0。
# stepper:


[temperature_fan box_fan1]
pin: PE5
sensor_type: temperature_host
control: watermark  # 添加这个选项！
min_temp: 0
max_temp: 120
target_temp: 65
min_speed: 0
max_speed: 0.8
max_delta: 2.0
shutdown_speed: 0
kick_start_time: 0.5
[temperature_fan box_fan2]
pin: PA8
sensor_type: temperature_host
control: watermark  # 添加这个选项！
min_temp: 0
max_temp: 120
target_temp: 65
min_speed: 0
max_speed: 0.8
max_delta: 2.0
shutdown_speed: 0
kick_start_time: 0.5

[temperature_fan cpu_fan]
pin: PD12
sensor_type: temperature_host
control: watermark  # 添加这个选项！
min_temp: 0
max_temp: 120
target_temp: 65
min_speed: 0
max_speed: 0.8
max_delta: 2.0
shutdown_speed: 0
kick_start_time: 0.5

[temperature_fan stepper_drive_fan]
pin: PD13
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: PF4
control: watermark  # 添加这个选项！
min_temp: 0
max_temp: 120
target_temp: 70
min_speed: 0.3
max_speed: 1.0
max_delta: 2.0
shutdown_speed: 0
kick_start_time: 0.5

# [fan_generic air_fan]
# pin: PE5
# max_power: 0.8
# shutdown_speed:
# cycle_time:
# hardware_pwm:
# kick_start_time:
# off_below:
# tachometer_pin:
# tachometer_ppr:
# tachometer_poll_interval:
# enable_pin:

# [heater_fan fan2]
# pin: PA0
# shutdown_speed: 1

# 手动控制风扇
# [fan_generic my_controller_fan]
# pin: PA0
# kick_start_time: 0.5
# #   风扇全速运行的时间（以秒为单位），当首次启用或增加超过50%时
# #   （有助于使风扇开始旋转）。
# #   默认值为0.100秒。
# max_power: 1
# #   引脚可以设置的最大功率（以0.0到1.0的值表示）。1.0的值允许引脚完全
# #   启用，而0.5的值则最多只能启用一半的时间。此设置可用于限制风扇的总
# #   功率输出（在延长时间内）。如果此值小于1.0，则风扇速度请求将在零和
# #   最大功率之间进行缩放（例如，如果最大功率为.9且请求的风扇速度为80%，
# #   则风扇功率将被设置为72%）。
# #   默认值为1.0。
# off_below: 0.10
# #   将供电给风扇的最小输入速度（以0.0到1.0的值表示）。当请求低于
# #   off_below的速度时，风扇将被关闭。此设置可以用于防止风扇停滞，
# #   并确保起动开始有效。
# #   默认值为0.0。

#####################################################################
#	无动作超时操作
#####################################################################
[idle_timeout]
gcode:
    _status_off
    TURN_OFF_HEATERS
    _TOP_LED_OFF
    _sb_leds_off
    M84
#   在空闲超时时执行的一系列 G-Code 命令。G-Code 格式请见
#   docs/Command_Templates.md。
#   默认运行 "TURN_OFF_HEATERS" 和 "M84"。
timeout: 600
#   在执行以上 G-Code 前等待的空闲时间（以秒为单位）
#   默认为 600 秒。

#####################################################################
#	z轴归位
#####################################################################
[safe_z_home]
home_xy_position: 150,150 # z限位的位置
speed: 100 #工具头移动到安全Z原点的速度。
z_hop: 10
#   在归位前抬升Z轴的距离（mm）。这将用于任何归位命令，即使
#   它没有将Z轴归位。
#   如果Z轴已经归位，并且当前的Z轴位置小于z_hop，那么这条命令
#   将把打印头提升到z_hop的高度。如果
#   Z轴尚未归位，则打印头将被提升z_hop的高度。
#   默认不执行Z抬升。
z_hop_speed: 10
#   在归位之前，Z轴抬升的速度（单位：mm/s）。
#   默认为15mm/s。
#move_to_previous: False
#   当设置为 "True "时，X轴和Y轴在Z轴归位后会重置到之前的位置。
#   默认为false。

# # [quad_gantry_level]
# # gantry_corners:
# # 	-58,-7
# #     308,318
# # ##	Probe points
# # points:
# # 	30,30
# # 	30,180
# # 	180,180
# # 	180,30
# # speed: 80
# # horizontal_move_z: 10
# # retries: 1
# # retry_tolerance: 0.05
# # max_adjust: 30

#####################################################################
#	z轴调平
#####################################################################
# [z_tilt]
##  Use Z_TILT_ADJUST to level the bed .
##  z_positions: Location of toolhead

##--------------------------------------------------------------------
## Uncomment below for 250mm build
#z_positions:
#    -50, 18
#    125, 298
#    300, 18
#points:
#    30, 5
#    125, 195
#    220, 5

## Uncomment below for 300mm build
# z_positions: #定义丝杆的位置 
#   -50, 18
#   150, 348
#   350, 18
# points: #测量点的位置 
#   30, 8
#   150, 245
#   270, 8

# points: #TAP后
#   30, 8
#   150, 230
#   270, 8

# points: # 侧置eddy
#   78.014, 11.05    # 第一个测量点
#   198.014, 251.05  # 第二个测量点
#   299, 11.05       # 第三个测量点，调整后的位置


## Uncomment below for 350mm build
#z_positions:
#   -50, 18
#   175, 398
#   400, 18
#points:
#   30, 5
#   175, 295
#   320, 5


##--------------------------------------------------------------------

# speed: 200 # 切换点位时移动的速度
# horizontal_move_z: 15 # 切换点位时平台下移的高度，如果此值过低，平台倾斜又较大，可能会调平失败
# retries: 5 # 调平最多运行的次数
# retry_tolerance: 0.02 # 调平的目标精度，小于此值时则停止调平


#####################################################################
# 	Probe
#####################################################################
# [probe]
# pin: PG10
# x_offset: 0
# y_offset: 0 #探针和喷嘴在y轴上的距离（以mm为单位）。
# z_offset = -0.290
# speed: 5   #   探测时Z轴的速度（以mm/s为单位）。
# samples: 3 #   探测每个点的次数。探测的z值将被平均。
# samples_result: average #   采样超过一次时的计算方法 - median(中位数) 或average（平均值）。
# sample_retract_dist: 5.0 #   在每个样本之间提升打印头的距离（以mm为单位）
# samples_tolerance: 0.05 #   样本可能与其他样本的最大Z距离（以mm为单位）差异。
# samples_tolerance_retries: 3 #   如果发现超过samples_tolerance的样本，重试的次数。
# # lift_speed: 30  # 在样本之间提升探针时Z轴的速度（以mm/s为单位）

# # 该代码用于在喷嘴温度高于150度时降低到150度，保护打印平台
# activate_gcode:
#     {% set PROBE_TEMP = 150 %} # 调平温度
#     {% set MAX_TEMP = PROBE_TEMP + 5 %} # 喷嘴最大温度
#     {% set ACTUAL_TEMP = printer.extruder.temperature %} # 当前喷嘴温度
#     {% set TARGET_TEMP = printer.extruder.target %} # 目标温度

#     {% if TARGET_TEMP > PROBE_TEMP %}
#         { action_respond_info('喷嘴温度目标 %.1f°C 太高，正在降低到 %.1f°C' % (TARGET_TEMP, PROBE_TEMP)) }
#         M109 S{ PROBE_TEMP } # 设置喷嘴温度为调平温度
#     {% else %}
#         # 温度目标已足够低，但喷嘴可能仍然太热。
#         {% if ACTUAL_TEMP > MAX_TEMP %}
#              { action_respond_info('喷嘴温度 %.1f°C 仍然过高，正在等待降到 %.1f°C 以下' % (ACTUAL_TEMP, MAX_TEMP)) }
#             TEMPERATURE_WAIT SENSOR=extruder MAXIMUM={ MAX_TEMP }
#         {% endif %}
#     {% endif %}
    

#####################################################################
# LED Control
#####################################################################

# [output_pin caselight ]
# #  Chamber Lighting - In 5V-RGB Position
# pin: PA9
# pwm: true
# shutdown_value: 0
# value:100
# cycle_time: 0.01

########################################
# 网床
########################################
# [bed_mesh]
# speed: 200 # 探测点之间的移动速度，默认 200
# horizontal_move_z: 10 # 探测时 z轴移动的距离 
# mesh_min: 20, 20 # 远点第一个坐标点
# mesh_max: 280, 280 # 近点最后一个坐标点
# zero_reference_position: 150,150 # 相对零点 即热床中心位置

# fade_start: 0.6 # 网格淡出起始点 从0.6mm 处开始进行网格淡出 
# fade_end: 10.0 # 网格淡出结束点 到10mm 处网格补偿归零
# probe_count: 5,5 # 探测点数量，必须时单数，因为有一个点必须位于热床中心位置 
# algorithm: bicubic # 插值算法

########################################
# EXP1 / EXP2 (display) pins
########################################

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,    # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,      # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<5V>

# See the sample-lcd.cfg file for definitions of common LCD displays.

# Some alternate glyphs for use with 128x64 LCDs. These are used by
# adding them to your printer.cfg.

# See docs/Config_Reference.md for a description of parameters.

######################################################################
# 显示屏 MKS Mini 12864v3.0 (with neopixel backlight leds)
######################################################################

#[display]
##	RepRapDiscount 128x64 Full Graphic Smart Controller
#lcd_type: st7920
#cs_pin: EXP1_4
#sclk_pin: EXP1_5
#sid_pin: EXP1_3
#menu_timeout: 40
#encoder_pins: ^EXP2_5, ^EXP2_3
#click_pin: ^!EXP1_2

#[output_pin beeper]
#pin: EXP1_1

#--------------------------------------------------------------------

#[display]
##	mini12864 LCD Display
#lcd_type: uc1701
#cs_pin: EXP1_3
#a0_pin: EXP1_4
#rst_pin: EXP1_5
#encoder_pins: ^EXP2_5, ^EXP2_3
#click_pin: ^!EXP1_2
#contrast: 63
#spi_software_miso_pin: EXP2_1
#spi_software_mosi_pin: EXP2_6
#spi_software_sclk_pin: EXP2_2

#[neopixel btt_mini12864]
##	To control Neopixel RGB in mini12864 display
#pin: EXP1_6
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

##	Set RGB values on boot up for each Neopixel. 
##	Index 1 = display, Index 2 and 3 = Knob
#[delayed_gcode setdisplayneopixel]
#initial_duration: 1
#gcode:
#        SET_LED LED=btt_mini12864 RED=1 GREEN=1 BLUE=1 INDEX=1 TRANSMIT=0
#        SET_LED LED=btt_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=0
#        SET_LED LED=btt_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=3 

#--------------------------------------------------------------------

[gcode_arcs]
resolution: 0.8  # 设定分辨率（mm），数值越小曲线越平滑
#####################################################################
# 	宏Macros
#####################################################################

[gcode_macro G32]
gcode:
    _status_homing
    BED_MESH_CLEAR
    G28
    QUAD_GANTRY_LEVEL
    G28
    ##	Uncomment for for your size printer:
    #--------------------------------------------------------------------
    ##	Uncomment for 250mm build
    #G0 X115 Y115 Z30 F3600
    
    ##	Uncomment for 300 build
    G0 X150 Y150 Z30 F3600
    
    ##	Uncomment for 350mm build
    #G0 X175 Y175 Z30 F3600
    #--------------------------------------------------------------------

#####################################################################
# 	开始打印  
[gcode_macro PRINT_START]
#   Use PRINT_START for the slicer starting script - please customise for your slicer of choice
gcode:
    # 获取参数
    {% set BED_TEMP = params.BED_TEMP|default(60)|float %}
    {% set EXTRUDER_TEMP = params.EXTUDER_TEMP|default(190)|float %}

    {% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
    CLEAR_PAUSE

    M117 Busy                  ; 向屏幕发送文字

    _status_busy
    _TOP_LED_ON
    G92 E0                         ; 重置挤出机
    BED_MESH_CLEAR                 ; 卸载网床

    # klicky 批量模式开启
    # EUCLID_PROBE_BEGIN_BATCH

    G28                            ; 归位所有轴
    # G1 Z20 F3000                   ; move nozzle away from bed

    G90
    G1 X150 Y50 Z50 F2000.0      ; 喷头移动到中心位置，热床下降，方便清理喷嘴和平台

    _status_heating
    M117 HEATING                   ; 向屏幕发送文字
    M104 S150                      ; 将喷嘴加热到 150 度软化耗材 
    M190 S{BED_TEMP}               ; 等待热床加热到指定温度
    

    

    _status_leveling
    M117 LEVELING                  ; 向屏幕发送文字
    # Z_TILT_ADJUST                  ; 3Z调平
    # SET_GCODE_VARIABLE MACRO=_KNOMI_STATUS VARIABLE=qgling VALUE=True
    # Z_TILT_ADJUST METHOD=scan horizontal_move_z=2 ; eddy 3Z扫平 !!!注意间隙很小，需保证3Z高度差在2mm内，要不然会刮板
    Z_TILT_ADJUST retries=0 ; 3Z调平
    {% if printer.z_tilt.last_adjustments|length > 0 %}
        M117 Z tilt completed successfully
    {% else %}
        M117 Z tilt rapid_scan
        Z_TILT_ADJUST METHOD=rapid_scan retries=5 horizontal_move_z=2
    {% endif %}
    # SET_GCODE_VARIABLE MACRO=_KNOMI_STATUS VARIABLE=qgling VALUE=False


    # 网床探测，klicky宏
    ; 判断是否有自适应网床参数
    # SET_GCODE_VARIABLE MACRO=_KNOMI_STATUS VARIABLE=probing VALUE=True
    {% if params.MESH_MIN %}
        M117 ADAPTIVE BED MESH                   ; 向屏幕发送文字
        ; 此处接收来自Orca的自适应网床参数，需要软件中配置传参
        # BED_MESH_CALIBRATE mesh_min={params.MESH_MIN} mesh_max={params.MESH_MAX} ALGORITHM={params.MESH_ALGO} PROBE_COUNT={params.PROBE_COUNT} ADAPTIVE=1 ADAPTIVE_MARGIN=0
        BED_MESH_CALIBRATE METHOD=rapid_scan mesh_min={params.MESH_MIN} mesh_max={params.MESH_MAX} ALGORITHM={params.MESH_ALGO} PROBE_COUNT={params.PROBE_COUNT} ADAPTIVE=1 ADAPTIVE_MARGIN=0
    {% else %}
        M117 BED MESH                   ; 向屏幕发送文字
        # BED_MESH_CALIBRATE         ; 每次探测网床
        BED_MESH_CALIBRATE METHOD=rapid_scan
    {% endif %}
    # SET_GCODE_VARIABLE MACRO=_KNOMI_STATUS VARIABLE=probing VALUE=False
    # BED_MESH_PROFILE LOAD=default  ; 可选调用默认网窗

    ## 根据不同温度选择网床
    # {% if BED_TEMP < 69 %}
    #   BED_MESH_PROFILE LOAD=pla60
    # {% elif BED_TEMP < 85 %}
    #   BED_MESH_PROFILE LOAD=petg70
    # {% elif BED_TEMP < 130 %}
    #   BED_MESH_PROFILE LOAD=abs105
    # {% endif %}

    _status_printing
	# G1 X47 Y{max_y} Z10 F5000 #移动到擦嘴位置

    # M109 S{EXTRUDER_TEMP} # 加热喷嘴到指定温度
	# WIPE_NOZZLE           # 擦嘴 擦嘴会停止加热喷嘴
    M109 S150             # 等待降温到150，避免烫坏平台
	G28 Z                 # z归位，重置网床原点
	
	
	# M117 HEATING
    # G1 X40 Y3 Z10 F2000
	# G1 X40 Y3 Z0.28 F2000 # 移动到画线开始
	# M109 S{EXTRUDER_TEMP}   # 再次加热喷嘴到指定温度

    M117 Printing
	
	_status_printing
	_status_top_on
	# M83
	# G92 E0
	# 开始画线
	# G1 X170 Y3 Z0.28 F1500.0 E10
	# G1 X170 Y3.3 Z0.28 F5000.0
	# G1 X100 Y3.3 Z0.28 F1500.0 E15
	# G92 E0.0
	# G1 Z2.0 F3000


    SET_GCODE_OFFSET Z=-0.005 #修正eddy偏移量

    G90
    M83
    G1 X18.0 Y1.0 Z10 F18000
    G1 Z0.8
	M109 S{EXTRUDER_TEMP}   # 再次加热喷嘴到指定温度
    # G1 Z0.8 #Move to start position
    # M109 S{nozzle_temperature_initial_layer[initial_extruder]}
    G1 Z0.25
    G0 E2 F300
    G0 X240 E15 F{8/(0.3*0.5)* 60} # 10为最大体积速度
    G0 Y11 E0.700 F{8/(0.3*0.5)/ 4 * 60}
    G0 X239.5
    G0 E0.25
    G0 Y1.5 E0.700
    G0 X18 E15 F{8/(0.3*0.5)* 60}
    M400

    # _status_homing
    # M117 HOMING                      ; 向屏幕发送文字
    # G28                              ; 归位所有轴

    # # 自动Z
    # # CALIBRATE_Z

    # # klicky 批量模式结束
    # # EUCLID_PROBE_END_BATCH

    # G1 X40 Y5 Z10 F5000.0            ; 移动到热床前方的位置
    # G1 X40 Y5 Z0.28 F200             ; 热床接近喷嘴

    # _status_heating
    # M117 HEATING                     ; 向屏幕发送文字
    # M109 S{EXTRUDER_TEMP}            ; 等待喷嘴加热到指定温度

    # M117 Printing                    ; 向屏幕发送文字

    # _status_printing
    # _status_top_on
    # # 画一条线擦嘴 默认300尺寸热床
    # M83                              ; M82命令将挤出轴设置为绝对模式
    # G92 E0                           ; 重置挤出机
    # # G1 E5 Z0.28 F100               ; 挤出一丢丢
    # G1 X40 Y5 Z20 F1000              ; 抬高Z轴
    # G1 X50 Y5 Z0.28 F5000.0          ; 画线开始
    # G1 X250 Y5 Z0.28 F1500.0 E15     ; 画一条线 ；350热床把x改为300， 250热床把x改为200
    # G1 X250 Y5.3 Z0.28 F5000.0       ; 往上面移动一点准备画第二条线 ；350热床把x改为300， 250热床把x改为200
    # G1 X100 Y5.3 Z0.28 F1500.0 E25   ; 画第二条线
    # G92 E0.0                         ; 重置挤出机
    # G1 Z2.0 F3000                    ; 抬升Z轴，准备移动到模型打印区域

    # SET_GCODE_OFFSET Z_ADJUST=-0.12 MOVE=1 # eddy修正值 在使用eddy当作Z限位时使用的。
    # SET_GCODE_OFFSET Z_ADJUST=-0.045 MOVE=1 # 修正值

#####################################################################
[gcode_macro TEST_LINE]
gcode:
	G1 X67 Y290 Z0.28 F2000 # 移动到画线开始
	M83
	G92 E0
	# 开始画线
	G1 X67 Y280 Z5 F1000
	G1 X80 Y280 Z0.28 F5000.0
	G1 X150 Y280 Z0.28 F1500.0 E10
	G1 X150 Y279.7 Z0.28 F5000.0
	G1 X80 Y279.7 Z0.28 F1500.0 E15
	G92 E0.0
	G1 Z2.0 F3000

# 	打印结束
[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    M117 PRINT_END
	_status_cleaning
	M400
	G92 E0
	G1 E-10 F3600 # 退出耗材
	G91
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 10 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	G0 Z1.00 X20.0 Y20.0 F20000
	TURN_OFF_HEATERS
	M107
	G0 Z{z_safe} F3600
	G90
	G0  X150 Y290 F3600
	# BED_MESH_CLEAR

    # SET_GCODE_OFFSET Z=0 # 取消eddy修正偏移量
	M117 Printing completed


[gcode_macro _TOP_LED_ON]
gcode:
    SET_LED LED=top_leds GREEN=1 RED=1 BLUE=1
[gcode_macro _TOP_LED_OFF]
gcode:
    SET_LED LED=top_leds GREEN=0 RED=0 BLUE=0
# [cancel_print]
# # 定义打印取消时要执行的 G-code
# gcode:
#     M117 PRINT_CANCEL
#     SET_GCODE_OFFSET Z=0 # 取消eddy修正偏移量

[gcode_macro BED_MESH_ALL]
#   网床校准
gcode:
    # EUCLID_PROBE_BEGIN_BATCH
    BED_MESH_CLEAR
    {% if "xyz" not in printer.toolhead.homed_axes %}
    G28
    {% endif %}
    EDDY_Z_TILT_ADJUST
    BED_MESH_CALIBRATE
    # EUCLID_PROBE_END_BATCH

#z_offset = 3.600

[gcode_macro EDDY_BED_MESH_ALL]
#   网床校准
gcode:
    # EUCLID_PROBE_BEGIN_BATCH
    BED_MESH_CLEAR
    {% if "xyz" not in printer.toolhead.homed_axes %}
    G28
    {% endif %}
    EDDY_Z_TILT_ADJUST
    BED_MESH_CALIBRATE METHOD=rapid_scan 


[gcode_macro EDDY_Z_TILT_ADJUST]
gcode:
    {% if "xyz" not in printer.toolhead.homed_axes %}
    G28
    {% endif %}
    Z_TILT_ADJUST retries=0 ; 3Z调平
    {% if printer.z_tilt.last_adjustments|length > 0 %}
        M117 Z tilt completed successfully
    {% else %}
        M117 Z tilt rapid_scan
        Z_TILT_ADJUST METHOD=rapid_scan retries=5 horizontal_move_z=2
    {% endif %}
[virtual_sdcard]
path: ~/printer_data/gcodes


[gcode_macro UNLOAD]
gcode:
    _status_heating
    M104 S200                       ; 将喷嘴加热到 200 度软化耗材 
    M109 S200                       ; 等待喷嘴加热到 200 度软化耗材
    M83
    _status_busy
    G1 E-200 F300                   ; 撤出200mm耗材
    M400
    M104 S0                         ; 关闭加热

[gcode_macro LOAD]
gcode:
    _status_busy
    G92 E0                         ; 重置挤出机
    {% if "xyz" not in printer.toolhead.homed_axes %}
    G28
    {% endif %}
    G0  X282 Y1 Z30 F3600
    _status_heating
    M109 S200                      ; 等待喷嘴加热到 200 度软化耗材
    M83
    G92 E0
    _status_busy
    G1 E150 F100                   ; 挤出100mm耗材
    M400
    M104 S0                        ; 关闭加热

# [pause_resume]

[gcode_macro CANCEL_PRINT]
description: Cancel the actual running print
rename_existing: CANCEL_PRINT_BASE
gcode:
  TURN_OFF_HEATERS
  CANCEL_PRINT_BASE

[gcode_macro GOTO_CENTER]
gcode:
    g0 x150 y150 F3600

[display_status]


[delayed_gcode my_startup_gcode]
initial_duration: 1.0
gcode:
    _status_ready
    _hbb_status_ready

[gcode_macro _HOME_X]
gcode = 
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc2209 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc2209 stepper_y'].run_current|float %}
	{% set HOME_CURRENT = 0.6 %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOME_CURRENT * RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOME_CURRENT * RUN_CURRENT_Y}
	
	
	G28 X
	
	G91
	G1 X-20 F1200
	
	
	G4 P1000
	G90
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}

[gcode_macro _HOME_Y]
gcode = 
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc2209 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc2209 stepper_y'].run_current|float %}
	{% set HOME_CURRENT = 0.6 %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOME_CURRENT * RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOME_CURRENT * RUN_CURRENT_X}
	
	
	G28 Y
	
	G91
	G1 Y-20 F1200
	
	
	G4 P1000
	G90
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}

[gcode_macro Z_ENDSTOP]
gcode:
    {% if "xyz" not in printer.toolhead.homed_axes %}
      G28
    {% endif %}
    Z_TILT_ADJUST
    G28 Z
    G1 X150 Y150 Z10 F3000
    Z_ENDSTOP_CALIBRATE


[gcode_macro TEST_STEPPER_B]
gcode:
    STEPPER_BUZZ STEPPER=stepper_x
    { action_respond_info('左电机将先顺时针旋转，然后逆时针旋转') }
[gcode_macro TEST_STEPPER_A]
gcode:
    STEPPER_BUZZ STEPPER=stepper_y
    { action_respond_info('右电机将先顺时针旋转，然后逆时针旋转') }
[gcode_macro TEST_STEPPER_Z]
gcode:
    STEPPER_BUZZ STEPPER=stepper_z
    { action_respond_info('（左前Z）床的左侧向下移动，然后又向上移动') }

[gcode_macro TEST_STEPPER_Z1]
gcode:
    STEPPER_BUZZ STEPPER=stepper_z1
    { action_respond_info('（后中Z） 床的后方向下移动，然后又向上移动') }

[gcode_macro TEST_STEPPER_Z2]
gcode:
    STEPPER_BUZZ STEPPER=stepper_z2
    { action_respond_info('（右前Z）床的右侧向下移动，然后又向上移动') }


# 温度到了之后立即开始不等待
[gcode_macro M109]
rename_existing: M99109
gcode:
    #Parameters
    {% set s = params.S|float %}
    
    M104 {% for p in params %}{'%s%s' % (p, params[p])}{% endfor %}  ; Set hotend temp
    {% if s != 0 %}
        TEMPERATURE_WAIT SENSOR=extruder MINIMUM={s} MAXIMUM={s+1}   ; Wait for hotend temp (within 1 degree)
    {% endif %}

# 自动调谐 静音 https://github.com/andrewmcgr/klipper_tmc_autotune

[motor_constants leisheng-42cm08]
resistance: 1.0  # 单位：欧姆
inductance: 0.0024  # 单位：亨利
holding_torque: 0.8  # 单位：牛·米
max_current: 2.5  # 单位：安培
steps_per_revolution: 200  # 每转步数（1.8°）



# [autotune_tmc stepper_x]
# motor: leisheng-42cm08
# [autotune_tmc stepper_y]
# motor: leisheng-42cm08

# [autotune_tmc stepper_z]
# motor: ldo-42sth48-2004ac
# [autotune_tmc stepper_z1]
# motor: ldo-42sth48-2004ac
# [autotune_tmc stepper_z2]
# motor: ldo-42sth48-2004ac

# [autotune_tmc extruder]
# motor: ldo-36sth20-1004ahg


[auto_speed]
# axis: diag_x, diag_y  ; 选择一个或多个轴进行测试，可选值：`x`、`y`、`diag_x`（对角线X）、`diag_y`（对角线Y）、`z`

# margin: 20            ; 在靠近打印机边界多少毫米的范围内避免进行测试运动

# settling_home: 1      ; 在开始自动速度测试前执行一次归位（home）

# max_missed: 1.0       ; 允许丢失的最大整步数（full steps）

# endstop_samples: 3    ; 进行端点检测（endstop）时，取样的次数，用于减少测量误差

# accel_min: 1000.0     ; 允许测试的最小加速度（单位：mm/s²）
# accel_max: 50000.0    ; 允许测试的最大加速度（单位：mm/s²）
# accel_accu: 0.05      ; 进行二分搜索时的精度，直到结果在此百分比范围内（例如 5%）

# velocity_min: 50.0    ; 允许测试的最小速度（单位：mm/s）
# velocity_max: 5000.0  ; 允许测试的最大速度（单位：mm/s）
# velocity_accu: 0.05   ; 进行二分搜索时的精度，直到结果在此百分比范围内（例如 5%）

# derate: 0.8           ; 对检测出的最佳加速度和速度进行降额（例如 0.8 表示降低 20% 以增加稳定性）

# validate_margin: Unset      ; 进行验证测试时使用的边距，默认为 `margin` 的值
# validate_inner_margin: 20.0 ; 进行验证测试时的内边距，防止过于靠近边缘
# validate_iterations: 50     ; 验证测试的迭代次数（执行 50 次测试以确认稳定性）

# results_dir: ~/printer_data/config ; 结果数据和图表的存储目录



[include moonraker_obico_macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.108662, 0.108662, 0.109698, 0.103000, 0.096908, 0.098159, 0.089545, 0.085718, 0.095443, 0.110343, 0.139460, 0.176233, 0.213224, 0.235014, 0.248977, 0.245261, 0.218032, 0.186567, 0.144499, 0.112451, 0.087968
#*# 	0.100909, 0.100070, 0.106364, 0.101517, 0.093568, 0.096069, 0.093352, 0.088641, 0.091352, 0.095443, 0.119559, 0.156451, 0.193961, 0.222821, 0.240027, 0.238728, 0.212604, 0.179128, 0.134421, 0.100194, 0.067217
#*# 	0.098374, 0.090236, 0.088428, 0.085486, 0.092486, 0.095443, 0.083911, 0.090910, 0.081501, 0.089102, 0.104464, 0.134226, 0.166080, 0.200530, 0.214767, 0.220003, 0.202858, 0.165259, 0.125848, 0.083681, 0.042200
#*# 	0.072410, 0.073987, 0.069468, 0.073758, 0.068335, 0.068861, 0.066545, 0.067893, 0.066083, 0.067656, 0.076699, 0.094192, 0.122918, 0.151823, 0.182127, 0.184652, 0.177235, 0.153502, 0.114717, 0.076009, 0.035063
#*# 	0.058181, 0.060219, 0.061796, 0.061123, 0.055701, 0.061347, 0.065181, 0.056849, 0.061122, 0.048236, 0.062240, 0.075335, 0.097747, 0.127294, 0.158756, 0.174711, 0.163989, 0.138620, 0.109983, 0.072853, 0.022990
#*# 	0.060450, 0.062931, 0.062470, 0.045439, 0.050391, 0.048882, 0.045439, 0.051271, 0.044574, 0.045863, 0.050611, 0.058854, 0.067891, 0.098177, 0.136530, 0.160650, 0.151412, 0.137351, 0.106752, 0.074201, 0.021261
#*# 	0.060679, 0.063818, 0.055930, 0.044573, 0.038963, 0.037878, 0.040251, 0.031619, 0.034858, 0.034858, 0.027296, 0.036519, 0.045437, 0.080296, 0.110108, 0.129617, 0.134030, 0.119757, 0.086160, 0.044999, 0.001839
#*# 	0.057066, 0.059857, 0.047592, 0.035723, 0.024705, 0.023195, 0.028163, 0.026872, 0.021040, 0.027532, 0.018666, 0.023634, 0.024060, 0.045014, 0.079397, 0.113040, 0.116630, 0.099212, 0.072853, 0.038098, -0.009768
#*# 	0.055257, 0.047462, 0.032265, 0.019750, 0.021246, 0.021247, 0.015634, 0.009609, 0.022331, 0.014124, 0.012832, 0.010296, 0.024294, 0.041335, 0.073757, 0.098372, 0.098998, 0.090448, 0.059545, 0.033791, -0.019926
#*# 	0.059102, 0.047372, 0.030331, 0.016513, 0.009607, 0.010531, 0.010062, 0.011235, 0.013273, 0.009373, 0.000374, 0.006839, 0.010766, 0.024425, 0.051492, 0.087063, 0.092257, 0.080603, 0.063160, 0.032265, -0.006310
#*# 	0.041114, 0.031841, 0.025787, 0.000608, -0.000081, -0.001693, -0.000771, 0.000374, -0.001694, 0.000608, -0.000535, -0.007000, -0.006546, 0.011002, 0.039097, 0.071719, 0.078275, 0.071046, 0.041334, 0.012598, -0.032535
#*# 	0.038301, 0.039826, 0.020175, 0.009373, 0.000372, -0.002851, -0.004010, -0.000770, -0.001692, -0.000989, 0.000154, -0.004931, -0.007233, 0.008670, 0.029040, 0.057294, 0.073102, 0.061122, 0.039608, 0.010751, -0.027066
#*# 	0.041555, 0.050186, 0.043709, 0.020380, 0.016513, 0.009374, 0.003849, 0.002235, 0.006149, 0.003613, 0.000139, -0.001473, 0.004303, 0.008214, 0.040251, 0.060450, 0.073528, 0.067893, 0.041981, 0.004755, -0.024074
#*# 	0.038741, 0.045449, 0.044999, 0.042200, 0.020395, 0.012613, 0.005680, -0.000316, -0.000535, 0.010063, 0.002455, -0.001459, -0.001239, 0.008450, 0.032704, 0.062010, 0.064951, 0.058625, 0.042201, 0.011690, -0.028801
#*# 	0.027722, 0.047372, 0.051898, 0.048896, 0.034638, 0.023272, 0.011001, 0.002926, 0.002690, 0.005535, -0.000081, -0.006764, -0.008612, 0.006836, 0.033773, 0.059085, 0.058428, 0.057293, 0.035079, 0.009844, -0.022683
#*# 	0.014344, 0.038097, 0.050830, 0.063144, 0.053449, 0.038301, 0.023620, 0.011674, 0.009373, 0.008918, 0.002690, 0.005226, 0.011001, 0.022973, 0.049966, 0.066083, 0.078275, 0.072169, 0.063587, 0.037659, 0.015868
#*# 	0.001531, 0.030536, 0.062239, 0.063833, 0.066757, 0.067219, 0.041979, 0.025365, 0.019311, 0.016294, 0.017215, 0.017583, 0.037655, 0.051696, 0.075121, 0.100052, 0.099854, 0.105911, 0.087523, 0.076680, 0.058624
#*# 	-0.006076, 0.022975, 0.049746, 0.073296, 0.079393, 0.084354, 0.066526, 0.058938, 0.034433, 0.031825, 0.029672, 0.037438, 0.051695, 0.076910, 0.104251, 0.114932, 0.123330, 0.127508, 0.120185, 0.119327, 0.114112
#*# 	-0.009300, 0.028381, 0.062240, 0.080909, 0.102357, 0.102785, 0.090005, 0.073084, 0.060006, 0.063374, 0.069238, 0.079409, 0.103821, 0.126453, 0.142819, 0.159791, 0.161471, 0.161471, 0.168384, 0.166509, 0.153574
#*# 	0.000154, 0.040470, 0.075105, 0.105519, 0.117238, 0.120185, 0.122684, 0.108430, 0.090910, 0.095033, 0.096288, 0.121219, 0.128974, 0.153932, 0.171750, 0.187610, 0.194591, 0.204142, 0.213268, 0.207101, 0.208362
#*# 	-0.019223, 0.014343, 0.044354, 0.067891, 0.079853, 0.086628, 0.076910, 0.062930, 0.053680, 0.045862, 0.046288, 0.066757, 0.077603, 0.101320, 0.109485, 0.121649, 0.121434, 0.122472, 0.118505, 0.112236, 0.097534
#*# x_count = 21
#*# y_count = 21
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 280.0
#*# min_y = 30.0
#*# max_y = 285.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 30.280
#*# pid_ki = 11.215
#*# pid_kd = 20.439
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 27.248
#*# pid_ki = 0.228
#*# pid_kd = 815.391
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 78.4
#*# shaper_type_y = 3hump_ei
#*# shaper_freq_y = 78.6
#*#
#*# [probe_eddy_current btt_eddy]
#*# calibrate =
#*# 	0.050000:3232596.973,0.090000:3231745.696,0.130000:3230893.834,
#*# 	0.170000:3230088.091,0.210000:3228930.386,0.250000:3228482.423,
#*# 	0.290000:3227699.865,0.330000:3226952.946,0.370000:3226205.245,
#*# 	0.410000:3225435.543,0.450000:3224633.316,0.490000:3223949.682,
#*# 	0.530000:3223206.984,0.570000:3222543.846,0.610000:3221836.676,
#*# 	0.650000:3221161.434,0.690000:3220463.956,0.730000:3219848.622,
#*# 	0.770000:3219179.631,0.810000:3218546.535,0.850000:3217912.016,
#*# 	0.890000:3217323.482,0.930000:3216717.416,0.970000:3216151.714,
#*# 	1.010000:3215525.206,1.050000:3214992.975,1.090000:3214410.750,
#*# 	1.130000:3213859.551,1.170000:3213317.308,1.210000:3212803.425,
#*# 	1.250000:3212246.763,1.290000:3211767.619,1.330000:3211241.545,
#*# 	1.370000:3210779.688,1.410000:3210303.133,1.450000:3209799.367,
#*# 	1.490000:3209338.099,1.530000:3208883.813,1.570000:3208427.764,
#*# 	1.610000:3207967.901,1.650000:3207546.333,1.690000:3207107.322,
#*# 	1.730000:3206693.553,1.770000:3206284.692,1.810000:3205867.825,
#*# 	1.850000:3205491.223,1.890000:3205103.874,1.930000:3204712.622,
#*# 	1.970000:3204321.351,2.010000:3203957.879,2.050000:3203578.007,
#*# 	2.090000:3203222.380,2.130000:3202892.963,2.170000:3202521.173,
#*# 	2.210000:3202192.660,2.250000:3201845.283,2.290000:3201526.102,
#*# 	2.330000:3201201.133,2.370000:3200889.500,2.410000:3200566.213,
#*# 	2.450000:3200259.487,2.490000:3199931.769,2.530000:3199628.217,
#*# 	2.570000:3199348.349,2.610000:3199043.748,2.650000:3198765.578,
#*# 	2.690000:3198478.206,2.730000:3198210.094,2.770000:3197927.164,
#*# 	2.810000:3197689.596,2.850000:3197418.916,2.890000:3197159.740,
#*# 	2.930000:3196896.912,2.970000:3196649.488,3.010000:3196399.704,
#*# 	3.050000:3196152.324,3.090000:3195912.835,3.130000:3195699.481,
#*# 	3.170000:3195462.685,3.210000:3195242.683,3.250000:3195015.947,
#*# 	3.290000:3194784.041,3.330000:3194603.639,3.370000:3194384.256,
#*# 	3.410000:3194182.125,3.450000:3193965.256,3.490000:3193747.716,
#*# 	3.530000:3193546.696,3.570000:3193351.628,3.610000:3193176.355,
#*# 	3.650000:3192989.919,3.690000:3192786.870,3.730000:3192604.590,
#*# 	3.770000:3192424.210,3.810000:3192268.469,3.850000:3192071.314,
#*# 	3.890000:3191905.013,3.930000:3191743.031,3.970000:3191558.394,
#*# 	4.010000:3191411.785,4.050000:3191249.980
#*#
#*# [bed_mesh default-1]
#*# version = 1
#*# points =
#*# 	0.113452, 0.122471, 0.113452, 0.112778, 0.164574, 0.249024, 0.268514, 0.179042, 0.103101
#*# 	0.091643, 0.097050, 0.090148, 0.087538, 0.109165, 0.186776, 0.228297, 0.168986, 0.056792
#*# 	0.081721, 0.074806, 0.062771, 0.062536, 0.056088, 0.098558, 0.173398, 0.139183, 0.018210
#*# 	0.075670, 0.039496, 0.033031, 0.029572, 0.021693, 0.039950, 0.115473, 0.097049, -0.008437
#*# 	0.056086, 0.018952, 0.004748, -0.001459, -0.003465, 0.005253, 0.086031, 0.075669, -0.027310
#*# 	0.055413, 0.049874, 0.014462, 0.006501, 0.005266, 0.013239, 0.070072, 0.061863, -0.026640
#*# 	0.024667, 0.074393, 0.048480, 0.015220, 0.004018, 0.017214, 0.083451, 0.068767, 0.004761
#*# 	-0.016713, 0.070073, 0.102661, 0.063695, 0.058404, 0.101729, 0.149479, 0.149480, 0.137144
#*# 	-0.010680, 0.085386, 0.118874, 0.085826, 0.079332, 0.126991, 0.161505, 0.154105, 0.124509
#*# x_count = 9
#*# y_count = 9
#*# mesh_x_pps = 21
#*# mesh_y_pps = 21
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 280.0
#*# min_y = 30.0
#*# max_y = 284.96000000000004
#*#
#*# [bed_mesh default-60]
#*# version = 1
#*# points =
#*# 	0.160537, 0.167812, 0.152402, 0.152191, 0.199021, 0.274160, 0.292334, 0.212650, 0.127807
#*# 	0.122965, 0.117997, 0.117793, 0.113251, 0.119507, 0.195466, 0.240948, 0.173260, 0.065782
#*# 	0.088853, 0.082388, 0.077536, 0.065327, 0.066249, 0.112166, 0.178907, 0.145863, 0.025310
#*# 	0.070617, 0.038743, 0.028789, 0.027807, 0.025071, 0.032034, 0.115184, 0.094245, -0.013554
#*# 	0.055638, 0.013615, 0.002991, 0.006145, -0.003840, 0.012350, 0.083781, 0.065546, -0.027960
#*# 	0.067175, 0.056796, 0.013867, 0.014358, 0.010876, 0.004544, 0.068083, 0.057250, -0.030309
#*# 	0.031036, 0.086053, 0.065781, 0.025308, 0.014103, 0.020071, 0.089074, 0.076613, 0.024563
#*# 	0.010131, 0.097279, 0.116929, 0.080088, 0.075454, 0.107199, 0.154440, 0.157594, 0.154422
#*# 	0.019340, 0.102672, 0.130961, 0.101148, 0.115404, 0.135691, 0.159189, 0.161671, 0.131422
#*# x_count = 9
#*# y_count = 9
#*# mesh_x_pps = 21
#*# mesh_y_pps = 21
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 280.0
#*# min_y = 30.0
#*# max_y = 284.96000000000004
#*#
#*# [bed_mesh default-50]
#*# version = 1
#*# points =
#*# 	0.108662, 0.108662, 0.109698, 0.103000, 0.096908, 0.098159, 0.089545, 0.085718, 0.095443, 0.110343, 0.139460, 0.176233, 0.213224, 0.235014, 0.248977, 0.245261, 0.218032, 0.186567, 0.144499, 0.112451, 0.087968
#*# 	0.100909, 0.100070, 0.106364, 0.101517, 0.093568, 0.096069, 0.093352, 0.088641, 0.091352, 0.095443, 0.119559, 0.156451, 0.193961, 0.222821, 0.240027, 0.238728, 0.212604, 0.179128, 0.134421, 0.100194, 0.067217
#*# 	0.098374, 0.090236, 0.088428, 0.085486, 0.092486, 0.095443, 0.083911, 0.090910, 0.081501, 0.089102, 0.104464, 0.134226, 0.166080, 0.200530, 0.214767, 0.220003, 0.202858, 0.165259, 0.125848, 0.083681, 0.042200
#*# 	0.072410, 0.073987, 0.069468, 0.073758, 0.068335, 0.068861, 0.066545, 0.067893, 0.066083, 0.067656, 0.076699, 0.094192, 0.122918, 0.151823, 0.182127, 0.184652, 0.177235, 0.153502, 0.114717, 0.076009, 0.035063
#*# 	0.058181, 0.060219, 0.061796, 0.061123, 0.055701, 0.061347, 0.065181, 0.056849, 0.061122, 0.048236, 0.062240, 0.075335, 0.097747, 0.127294, 0.158756, 0.174711, 0.163989, 0.138620, 0.109983, 0.072853, 0.022990
#*# 	0.060450, 0.062931, 0.062470, 0.045439, 0.050391, 0.048882, 0.045439, 0.051271, 0.044574, 0.045863, 0.050611, 0.058854, 0.067891, 0.098177, 0.136530, 0.160650, 0.151412, 0.137351, 0.106752, 0.074201, 0.021261
#*# 	0.060679, 0.063818, 0.055930, 0.044573, 0.038963, 0.037878, 0.040251, 0.031619, 0.034858, 0.034858, 0.027296, 0.036519, 0.045437, 0.080296, 0.110108, 0.129617, 0.134030, 0.119757, 0.086160, 0.044999, 0.001839
#*# 	0.057066, 0.059857, 0.047592, 0.035723, 0.024705, 0.023195, 0.028163, 0.026872, 0.021040, 0.027532, 0.018666, 0.023634, 0.024060, 0.045014, 0.079397, 0.113040, 0.116630, 0.099212, 0.072853, 0.038098, -0.009768
#*# 	0.055257, 0.047462, 0.032265, 0.019750, 0.021246, 0.021247, 0.015634, 0.009609, 0.022331, 0.014124, 0.012832, 0.010296, 0.024294, 0.041335, 0.073757, 0.098372, 0.098998, 0.090448, 0.059545, 0.033791, -0.019926
#*# 	0.059102, 0.047372, 0.030331, 0.016513, 0.009607, 0.010531, 0.010062, 0.011235, 0.013273, 0.009373, 0.000374, 0.006839, 0.010766, 0.024425, 0.051492, 0.087063, 0.092257, 0.080603, 0.063160, 0.032265, -0.006310
#*# 	0.041114, 0.031841, 0.025787, 0.000608, -0.000081, -0.001693, -0.000771, 0.000374, -0.001694, 0.000608, -0.000535, -0.007000, -0.006546, 0.011002, 0.039097, 0.071719, 0.078275, 0.071046, 0.041334, 0.012598, -0.032535
#*# 	0.038301, 0.039826, 0.020175, 0.009373, 0.000372, -0.002851, -0.004010, -0.000770, -0.001692, -0.000989, 0.000154, -0.004931, -0.007233, 0.008670, 0.029040, 0.057294, 0.073102, 0.061122, 0.039608, 0.010751, -0.027066
#*# 	0.041555, 0.050186, 0.043709, 0.020380, 0.016513, 0.009374, 0.003849, 0.002235, 0.006149, 0.003613, 0.000139, -0.001473, 0.004303, 0.008214, 0.040251, 0.060450, 0.073528, 0.067893, 0.041981, 0.004755, -0.024074
#*# 	0.038741, 0.045449, 0.044999, 0.042200, 0.020395, 0.012613, 0.005680, -0.000316, -0.000535, 0.010063, 0.002455, -0.001459, -0.001239, 0.008450, 0.032704, 0.062010, 0.064951, 0.058625, 0.042201, 0.011690, -0.028801
#*# 	0.027722, 0.047372, 0.051898, 0.048896, 0.034638, 0.023272, 0.011001, 0.002926, 0.002690, 0.005535, -0.000081, -0.006764, -0.008612, 0.006836, 0.033773, 0.059085, 0.058428, 0.057293, 0.035079, 0.009844, -0.022683
#*# 	0.014344, 0.038097, 0.050830, 0.063144, 0.053449, 0.038301, 0.023620, 0.011674, 0.009373, 0.008918, 0.002690, 0.005226, 0.011001, 0.022973, 0.049966, 0.066083, 0.078275, 0.072169, 0.063587, 0.037659, 0.015868
#*# 	0.001531, 0.030536, 0.062239, 0.063833, 0.066757, 0.067219, 0.041979, 0.025365, 0.019311, 0.016294, 0.017215, 0.017583, 0.037655, 0.051696, 0.075121, 0.100052, 0.099854, 0.105911, 0.087523, 0.076680, 0.058624
#*# 	-0.006076, 0.022975, 0.049746, 0.073296, 0.079393, 0.084354, 0.066526, 0.058938, 0.034433, 0.031825, 0.029672, 0.037438, 0.051695, 0.076910, 0.104251, 0.114932, 0.123330, 0.127508, 0.120185, 0.119327, 0.114112
#*# 	-0.009300, 0.028381, 0.062240, 0.080909, 0.102357, 0.102785, 0.090005, 0.073084, 0.060006, 0.063374, 0.069238, 0.079409, 0.103821, 0.126453, 0.142819, 0.159791, 0.161471, 0.161471, 0.168384, 0.166509, 0.153574
#*# 	0.000154, 0.040470, 0.075105, 0.105519, 0.117238, 0.120185, 0.122684, 0.108430, 0.090910, 0.095033, 0.096288, 0.121219, 0.128974, 0.153932, 0.171750, 0.187610, 0.194591, 0.204142, 0.213268, 0.207101, 0.208362
#*# 	-0.019223, 0.014343, 0.044354, 0.067891, 0.079853, 0.086628, 0.076910, 0.062930, 0.053680, 0.045862, 0.046288, 0.066757, 0.077603, 0.101320, 0.109485, 0.121649, 0.121434, 0.122472, 0.118505, 0.112236, 0.097534
#*# x_count = 21
#*# y_count = 21
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 280.0
#*# min_y = 30.0
#*# max_y = 285.0
#*#
#*# [stepper_z]
#*# position_endstop = -0.255
